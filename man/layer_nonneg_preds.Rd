% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/layer_nonneg_preds.R
\name{layer_nonneg_preds}
\alias{layer_nonneg_preds}
\title{Lower and upper thresholds for prediction values}
\usage{
layer_nonneg_preds(
  frosting,
  pred_lower = 0,
  pred_upper = Inf,
  id = rand_id("nonneg_preds")
)
}
\arguments{
\item{frosting}{a \code{frosting} postprocessor}

\item{pred_lower}{Lower threshold for the prediction values. That is, any
predictions that are less than this lower bound are set to it.
Default value is \code{0}.}

\item{pred_upper}{Upper threshold for the prediction values. That is, any
predictions that are greater than this upper bound are set to it.
Default value is \code{Inf}.}

\item{id}{a random id string}
}
\value{
an updated \code{frosting} postprocessor
}
\description{
This postprocessing step is used to set prediction values that are
samaller than the lower threshold or higher than the upper threshold equal
to the threshold values.
}
\examples{
jhu <- case_death_rate_subset \%>\%
  dplyr::filter(time_value < "2021-03-08", geo_value \%in\% c("ak", "ca", "ar"))
r <- epi_recipe(jhu) \%>\%
  step_epi_lag(death_rate, lag = c(0, 7, 14)) \%>\%
  step_epi_ahead(death_rate, ahead = 7) \%>\%
  recipes::step_naomit(recipes::all_predictors()) \%>\%
  recipes::step_naomit(recipes::all_outcomes(), skip = TRUE)
wf <- epi_workflow(r, parsnip::linear_reg()) \%>\% parsnip::fit(jhu)
latest <- jhu \%>\%
  dplyr::filter(time_value >= max(time_value) - 14)

f <- frosting() \%>\%
  layer_predict() \%>\%
  layer_nonneg_preds(pred_lower = 0.180, pred_upper = 0.310)
wf1 <- wf \%>\% add_frosting(f)
p <- predict(wf1, latest)
p
}
